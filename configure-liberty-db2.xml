<?xml version="1.0" encoding="UTF-8"?>
<!--

    Licensed Materials - Property of IBM
    5725-I43 (C) Copyright IBM Corp. 2011, 2014. All Rights Reserved.
    US Government Users Restricted Rights - Use, duplication or
    disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

-->


<project basedir="." default="help">
  <!-- Start of Property Passwords
        Enter the password values or "************" to be prompted interactively
  -->

  <property name="database.db2.wladmin.password" value="wluser"/>
  <!--
     Default values for a migration from Worklight Server 6.1 or 6.0 
       database.db2.worklight.password: value of ${db2.databases.password}
       database.db2.worklightreports.password: value of ${db2.databases.password}
  -->
  <property name="database.db2.worklight.password" value="wluser"/>
  <property name="database.db2.worklightreports.password" value="wluser"/>
  <!-- End of Property Passwords -->
  

  <!-- Start of Property Parameters -->
  <property name="worklight.server.install.dir" value="/opt/IBM/Worklight"/>
  <property name="worklight.project.war.file" value="/vagrant/app/JQInsuranceProj.war"/>
  <property name="worklight.contextroot" value="/JQInsuranceProj"/>
  <property name="wladmin.console.install" value="true"/>
  <property name="wladmin.default.user" value="admin"/>
  <property name="wladmin.default.user.initialpassword" value="admin"/>
  <!--
     Database settings for DB2
        If the database and users have not been created manually
        Run the admdatabases and databases target with file create-database-db2.xml
        that includes the dba credentials
  -->
  <property name="database.db2.host" value="db2.company.com"/>
  <property name="database.db2.port" value="50000"/>
  <property name="database.db2.instance" value="db2inst1"/>
  <property name="database.db2.driver.dir" value="/vagrant/db2_jdbc"/>
  <property name="database.db2.wladmin.dbname" value="WLADMIN"/>
  <property name="database.db2.wladmin.schema" value="WLADMIN"/>
  <property name="database.db2.wladmin.username" value="wluser"/>
  <!--
     Default values for a migration from Worklight Server 6.1 or 6.0 
       database.db2.worklight.dbname : WRKLGHT
       database.db2.worklight.schema : ""
       database.db2.worklight.username: value of ${db2.databases.username}
       database.db2.worklightreports.dbname : WLREPORT
       database.db2.worklightreports.schema : ""
       database.db2.worklightreports.username: value of ${db2.databases.username}
  -->
  <property name="database.db2.worklight.dbname" value="WRKLGHT"/>
  <property name="database.db2.worklight.schema" value="WRKLGHT"/>
  <property name="database.db2.worklight.username" value="wluser"/>
  <property name="database.db2.worklightreports.dbname" value="WRKLGHT"/>
  <property name="database.db2.worklightreports.schema" value="WLREPORT"/>
  <property name="database.db2.worklightreports.username" value="wluser"/>

  <!--
      Application Server
  -->
  <property name="appserver.was.installdir" value="/opt/IBM/WebSphere/Liberty"/>
  <property name="appserver.was.profile" value="Liberty"/>
  <property name="appserver.was85liberty.serverInstance" value="server1"/>
  <property name="config.migration.tool.enable" value="true"/>
  
  <property name="config.parameters.version" value="2.0"/>
  <!-- End of Property Parameters -->
   
  <taskdef resource="com/worklight/ant/defaults.properties">
    <classpath>
      <fileset dir="${worklight.server.install.dir}/WorklightServer">
        <include name="worklight-ant-deployer.jar"/>
      </fileset>
    </classpath>
  </taskdef>

  <!-- Start of the database target Generated by Worklight -->
  <target name="databases">
    <configuredatabase kind="Worklight">
      <db2 database="${database.db2.worklight.dbname}" 
           server="${database.db2.host}" 
           instance="${database.db2.instance}" 
           user="${database.db2.worklight.username}" 
           port= "${database.db2.port}"
           schema = "${database.db2.worklight.schema}"
           password="${database.db2.worklight.password}">
      </db2>
      <driverclasspath>
        <fileset dir="${database.db2.driver.dir}">
          <include name="db2jcc4.jar"/>
          <include name="db2jcc_license_*.jar"/>
        </fileset>
      </driverclasspath>
    
      <!-- The adminDatabase element is used to migrate the management data of
           a Worklight database of Worklight 6.1 or earlier to the
           administration database 
      -->
      <adminDatabase runtimeContextRoot="${worklight.contextroot}">
      
        <db2 database="${database.db2.wladmin.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.wladmin.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.wladmin.schema}"
             password="${database.db2.wladmin.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </adminDatabase>
    </configuredatabase>
    <configuredatabase kind="WorklightReports">
      <db2 database="${database.db2.worklightreports.dbname}" 
           server="${database.db2.host}" 
           instance="${database.db2.instance}" 
           user="${database.db2.worklightreports.username}" 
           port= "${database.db2.port}"
           schema = "${database.db2.worklightreports.schema}"
           password="${database.db2.worklightreports.password}">
      </db2>
      <driverclasspath>
        <fileset dir="${database.db2.driver.dir}">
          <include name="db2jcc4.jar"/>
          <include name="db2jcc_license_*.jar"/>
        </fileset>
      </driverclasspath>
    </configuredatabase>
  </target>
  <!-- End of the database target Generated by Worklight -->
	
  <!-- Start of the admdatabases target Generated by Worklight -->
  <target name="admdatabases">
    <configuredatabase kind="WorklightAdmin">
      <db2 database="${database.db2.wladmin.dbname}" 
           server="${database.db2.host}" 
           instance="${database.db2.instance}" 
           user="${database.db2.wladmin.username}" 
           port= "${database.db2.port}"
           schema = "${database.db2.wladmin.schema}"
           password="${database.db2.wladmin.password}">
      </db2>
      <driverclasspath>
        <fileset dir="${database.db2.driver.dir}">
          <include name="db2jcc4.jar"/>
          <include name="db2jcc_license_*.jar"/>
        </fileset>
      </driverclasspath>
    </configuredatabase>
  </target>
  <!-- End of the admdatabases target Generated by Worklight -->	

  <!-- Start of the install target Generated by Worklight -->
  <target name="install">
    <configureapplicationserver contextroot="${worklight.contextroot}">
      <project warfile="${worklight.project.war.file}"/>
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <database kind="Worklight">
        <db2 database="${database.db2.worklight.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.worklight.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.worklight.schema}"
             password="${database.db2.worklight.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
      <database kind="WorklightReports">
        <db2 database="${database.db2.worklightreports.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.worklightreports.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.worklightreports.schema}"
             password="${database.db2.worklightreports.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
    </configureapplicationserver>
  </target>
  <!-- End of the install target Generated by Worklight -->
	
  <!-- Start of the minimal-update target Generated by Worklight -->
  <target name="minimal-update">
    <updateapplicationserver contextroot="${worklight.contextroot}">
      <project warfile="${worklight.project.war.file}"/>
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <database kind="Worklight">
        <db2 database="${database.db2.worklight.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.worklight.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.worklight.schema}"
             password="${database.db2.worklight.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
      <database kind="WorklightReports">
        <db2 database="${database.db2.worklightreports.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.worklightreports.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.worklightreports.schema}"
             password="${database.db2.worklightreports.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
    </updateapplicationserver>
  </target>
  <!-- End of the minimal-updatetarget Generated by Worklight -->	

  <!-- Start of the uninstall target Generated by Worklight -->
  <target name="uninstall">
    <unconfigureapplicationserver contextroot="${worklight.contextroot}">
      <project warfile="${worklight.project.war.file}"/>
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <database kind="Worklight">
        <db2 database="${database.db2.worklight.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.worklight.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.worklight.schema}"
             password="${database.db2.worklight.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
      <database kind="WorklightReports">
        <db2 database="${database.db2.worklightreports.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.worklightreports.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.worklightreports.schema}"
             password="${database.db2.worklightreports.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
    </unconfigureapplicationserver>
  </target>
  <!-- End of the uninstall target Generated by Worklight -->
	
  <!-- Start of the adminstall target Generated by Worklight -->
  <target name="adminstall">
    <installworklightadmin>
      <console install="${wladmin.console.install}"/>
      <jmx/>	
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <user name="${wladmin.default.user}" role="worklightadmin" password="${wladmin.default.user.initialpassword}"/>
      <database kind="WorklightAdmin">
        <db2 database="${database.db2.wladmin.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.wladmin.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.wladmin.schema}"
             password="${database.db2.wladmin.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
    </installworklightadmin>
  </target>
  <!-- End of the adminstall target Generated by Worklight -->
		
  <!-- Start of the minimal-admupdate target Generated by Worklight -->
  <target name="minimal-admupdate">
    <updateworklightadmin>
      <console install="${wladmin.console.install}"/>
      <jmx/>	
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <user name="${wladmin.default.user}" role="worklightadmin" password="${wladmin.default.user.initialpassword}"/>
      <database kind="WorklightAdmin">
        <db2 database="${database.db2.wladmin.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.wladmin.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.wladmin.schema}"
             password="${database.db2.wladmin.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
    </updateworklightadmin>
  </target>
  <!-- End of the minimal-admupdate target Generated by Worklight -->	

  <!-- Start of the admuninstall target Generated by Worklight -->
  <target name="admuninstall">
    <uninstallworklightadmin>
      <console install="${wladmin.console.install}"/>
      <jmx/>	
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <user name="${wladmin.default.user}" role="worklightadmin" password="${wladmin.default.user.initialpassword}"/>
      <database kind="WorklightAdmin">
        <db2 database="${database.db2.wladmin.dbname}" 
             server="${database.db2.host}" 
             user="${database.db2.wladmin.username}" 
             port= "${database.db2.port}"
             schema = "${database.db2.wladmin.schema}"
             password="${database.db2.wladmin.password}">
        </db2>
        <driverclasspath>
          <fileset dir="${database.db2.driver.dir}">
            <include name="db2jcc4.jar"/>
            <include name="db2jcc_license_*.jar"/>
          </fileset>
        </driverclasspath>
      </database>
    </uninstallworklightadmin>
  </target>
  <!-- End of the admuninstall target Generated by Worklight -->	

  <target name="help">
    <basename property="ant.file.basename" file="${ant.file}"/>
    <echo message="This ant project file can be used in three ways:"/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} admdatabases"/>
    <echo message="Configures the databases for use with a Worklight Administrationt."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} adminstall"/>
    <echo message="Installs a Worklight Administration Service in the application server."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} minimal-admupdate"/>
    <echo message="Updates an installed Worklight Administration Service in the application server."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} admuninstall"/>
    <echo message="Uninstalls a Worklight Administration Service from the application server."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} databases"/>
    <echo message="Configures the databases for use with a Worklight project."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} install"/>
    <echo message="Installs a Worklight project in the application server."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} minimal-update"/>
    <echo message="Updates an installed Worklight project's WAR file and runtime library in the application server."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} uninstall"/>
    <echo message="Uninstalls a Worklight project from the application server."/>
    <echo/>
  </target>
</project>
